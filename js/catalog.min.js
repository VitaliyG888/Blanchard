document.addEventListener("DOMContentLoaded", function () {
	const h = document.querySelector(".accordeon");
	let u = document.querySelectorAll(".tab-nav__link"),
		f, n, e, i, t, r, c = function () {
			for (let n = f.contentDdata.length - 1; n >= 0; n--) {
				let i = f.contentDdata[n];
				t = document.createElement("div");
				let r = document.createElement("button"),
					u = document.createElement("div"),
					e = document.createElement("div");
				u.classList.add("accordeon-content", "js-content");
				e.classList.add("accordeon-item");
				r.innerHTML = i.title;
				n == 0 ? (t.classList.add("accordeon-section", "js-section", "active"), r.classList.add("accordeon-title", "accordeon-title--first")) : (t.classList.add("accordeon-section", "js-section"), r.classList.add("accordeon-title"));
				h.prepend(t);
				t.prepend(r);
				t.append(u);
				u.prepend(e);
				for (let n = 0; n < Object.values(i.content).length; n++) {
					let t = document.createElement("button");
					t.classList.add("accordeon-link", "reset-btn", `${Object.keys(i.content)[n]}`);
					t.innerHTML = Object.values(i.content)[n];
					e.append(t)
				}
			}
		},
		o = function (n = 0) {
			const t = document.querySelector(".card");
			document.querySelector(".card__img") && document.querySelector(".card__img").remove();
			document.querySelector(".card__title") && document.querySelector(".card__title").remove();
			document.querySelector(".card__date") && document.querySelector(".card__date").remove();
			document.querySelector(".card__description") && document.querySelector(".card__description").remove();
			let i = document.createElement("img");
			i.classList.add("card__img");
			i.src = r["catalog card"][n].foto;
			let u = document.createElement("h3");
			u.classList.add("card__title");
			u.innerHTML = r["catalog card"][n].names;
			let f = document.createElement("span");
			f.classList.add("card__date", "signature");
			f.innerHTML = r["catalog card"][n].date;
			let e = document.createElement("p");
			e.classList.add("card__description");
			e.innerHTML = r["catalog card"][n].descriptions;
			t.prepend(i);
			t.append(u);
			t.append(f);
			t.append(e)
		},
		l = function (n = 1) {
			request2 = new XMLHttpRequest;
			request2.open("GET", `data-name-${n}.json`);
			request2.onload = function () {
				if (request2.readyState === 4)
					if (request2.status === 200) {
						r = JSON.parse(request2.responseText);
						o();
						let n = document.querySelectorAll(".accordeon-link");
						n.forEach(n => {
							n.addEventListener("click", function (n) {
								let t = n.target.className.replace(/[^\d]/g, "") - 1;
								o(t)
							})
						})
					} else console.error(request2.statusText)
			};
			request2.onerror = function () {
				console.error(request2.statusText)
			};
			request2.send()
		},
		s = function () {
			u.forEach(n => {
				if (n.classList.contains("is-active__border")) return i = n.getAttribute("data-tab-name")
			});
			switch (i) {
				case "tab1":
					n = "data1.json";
					break;
				case "tab2":
					n = "data2.json";
					break;
				case "tab3":
					n = "data3.json";
					break;
				case "tab4":
					n = "data4.json";
					break;
				case "tab5":
					n = "data5.json"
			}
			request = new XMLHttpRequest;
			request.open("GET", n);
			request.onload = function () {
				if (request.readyState === 4)
					if (request.status === 200) {
						f = JSON.parse(request.responseText);
						e = n.replace(/[^\d]/g, "");
						c();
						let t = document.querySelectorAll(".js-section"),
							i = document.querySelectorAll(".accordeon-title"),
							r = function () {
								[].forEach.call(t, function (n, r) {
									!r == 0 ? n.querySelector(".js-content").style.maxHeight = "0px" : r == 0 && (n.querySelector(".js-content").style.maxHeight = n.querySelector(".js-content >*").clientHeight + "px", n.classList.add("active"));
									n.addEventListener("click", function (r) {
										i.forEach(i => {
											if (r.target == i) {
												let i = n.classList.contains("active"),
													u = n.querySelectorAll(".accordeon-link");
												[].forEach.call(u, function (n) {
													r.target.className == n.className && (r.stopPropagation(), console.log(r))
												});
												t.forEach(function (n) {
													n.querySelector(".js-content").style.maxHeight = "0px";
													n.classList.contains("active") && n.classList.remove("active")
												});
												i ? (this.classList.remove("active"), this.querySelector(".js-content").style.maxHeight = "0px") : (this.classList.add("active"), this.querySelector(".js-content").style.maxHeight = n.querySelector(".js-content >*").clientHeight + "px")
											}
											r.stopPropagation()
										})
									})
								})
							};
						r();
						l(e)
					} else console.error(request.statusText)
			};
			request.onerror = function () {
				console.error(request.statusText)
			};
			request.send()
		},
		a = function () {
			function t() {
				u.forEach(n => {
					n.classList.remove("is-active__border")
				});
				this.classList.add("is-active__border");
				i = this.getAttribute("data-tab-name");
				r(i);
				let n = document.querySelectorAll(".accordeon-section");
				n.forEach(n => {
					n.remove()
				});
				s()
			}

			function r(t) {
				n.forEach(n => {
					n.classList.contains(t) ? n.classList.add("is-active__description") : n.classList.remove("is-active__description")
				})
			}
			let n = document.querySelectorAll(".tab");
			u.forEach(n => {
				n.addEventListener("click", t)
			})
		};
	s();
	a()
})
